# Niri Bar Configuration
# This file configures the Niri window manager status bar structure and behavior
# 
application:
  # Theme configuration
  theme: "dracula"  # Options: wombat, solarized, dracula

  # ---- GLOBAL WALLPAPER MODULE DEFAULTS ----

  # ---- GLOBAL *MODULE DEFAULTS ----
  modules:
    clock: &clock_default
      format: "%a %b %d, %Y @ %H:%M:%S"
      tooltip: true

    workspaces: &workspaces_default
      highlight_active: true
      show_numbers: true
      show_wallpaper: true
      scroll_wraparound: false
      scroll_throttle_ms: 30

    window_title: &window_title_default
      max_length: 80
      ellipsize: "end"
      display: "show"  # show, hide

    battery: &battery_default
      show_percentage: true
      warn_threshold: 20
      critical_threshold: 10
      display: "show"  # show, hide

    tray: &tray_default
      align: "right"
      display: "show"

    system: &system_default
      cpu: true
      mem: true
      net: true
      display: "show"  # show, hide

    # Wallpaper module (for switching per workspace)
    wallpaper: &wallpaper_default
      default_wallpaper: "~/Dropbox/Ray/Photos/durango.png"
      wallpapers:
        #"1": "/path/to/workspace1.jpg"
        "2": "~/Pictures/plugged-in.gif"
        #"dev": "/path/to/dev-workspace.jpg"
      # special_cmd: 'mytool -i ${current_workspace_image}'
      swww_options:
        transition_type: "fade"
        transition_duration: 1.0
        transition_step: 90
        transition_fps: 30
        filter: "Lanczos3"
        resize: "crop"
        fill_color: "000000"

    # Viewport module (live workspace preview)
    viewport: &viewport_default
      width: 140
      show_window_titles: true
      highlight_focused: true

  # ---- LAYOUT PROFILES ----
  layouts:
    # Default everywhere: simple 3 columns
    three_column: &layout_three
      columns: &cols_three
        left: &col_left
          modules: ["workspaces", "wallpaper", "viewport"]
          overflow: hide
          gap: 6        # pixels between modules
          align: "left" # left, center, right
        center: &col_center
          modules: ["window_title"]
          overflow: hide
          gap: 6
          align: "center"  # Center column centers its contents
        right: &col_right
          modules: [ "tray", "clock", "battery" ]
          overflow: kebab
          gap: 8         # Slightly more spacing for crowded right column
          align: "right"

    # Laptop override: 5 panels (left, left-of-center, center, right-of-center, right)
    five_panel: &layout_five
      columns:
        left:
          modules: ["workspaces", "wallpaper", "viewport"]
          overflow: hide
          gap: 6
          align: "left"
        left-of-center:
          modules: ["window_title"]
          overflow: hide
          gap: 6
          align: "left"
        center:
          modules: []
          overflow: hide
          gap: 6
          align: "center"
        right-of-center:
          modules: ["clock"]
          overflow: hide
          gap: 6
          align: "right"
        right:
          modules: ["battery", "system"]
          overflow: kebab
          gap: 8
          align: "right"

  # ---- MONITOR CONFIG ----
  monitors:
    # Global baseline: 3-column layout on all monitors
    - match: ".*"
      show_bar: true

      layout: *layout_three

      modules:
        clock:        { <<: *clock_default }
        workspaces:   { <<: *workspaces_default }
        window_title: { <<: *window_title_default }
        battery:      { <<: *battery_default }
        tray:         { <<: *tray_default }
        system:       { <<: *system_default }
        wallpaper:     { <<: *wallpaper_default }
        viewport:     { <<: *viewport_default }

    - match: "^eDP-1$"
      show_bar: true

      layout:
        columns:
          left:
            modules: ["workspaces", "wallpaper", "viewport"]
            overflow: hide
            gap: 6
            align: "left"
            # Optional fixed width: uncomment to lock width
            # width: 200
          center:
            modules: ["window_title"]
            overflow: hide
            gap: 4         # Tighter spacing for laptop
            align: "center"
            # width: 400
          right:
            modules: ["battery", "clock"]
            overflow: hide
            gap: 6
            align: "right"
            # width: 200

      modules:
        clock:
          <<: *clock_default
          format: "%a %b %d, %Y @ %I:%M:%S %p"  # per-monitor override (shorter format)
        window_title:
          <<: *window_title_default
          display: "show"  # Ensure visible on laptop
        wallpaper:
          <<: *wallpaper_default
        viewport:
          <<: *viewport_default

    # Example: disable all other DP heads (optional)
    - match: "^DP-.*$"
      show_bar: false

# Logging configuration
logging:
  level: "debug"  # debug, info, warn, error
  file: "~/.local/share/niri-bar/niri-bar.log"
  console: true
  format: "iso8601"  # iso8601, simple
  include_file: true
  include_line: true
  include_class: true
